# =========================================================
# 0. 通用設定（每隻 worker 建議都要填）
# =========================================================
APP_ENV=dev                 # dev / prod / test ...
LOG_LEVEL=INFO              # DEBUG / INFO / WARNING / ERROR

SITE_UID=s001
DEVICE_UID=d0002

# Connector Name = 你的表格裡的 Connector Name
CONN_NAME=user_default

# DRY-RUN 模式
DRY_RUN=false

# =========================================================
# 1. MNX / RabbitMQ
# =========================================================
# MNXNexlib 專案根目錄 (macOS Path)
MNX_LIB_ROOT=/Users/eric/nex
NEXCORE_DIR=${MNX_LIB_ROOT}/NexCore

# RabbitMQ Config File
RMQ_CFG_FILENAME=rabbitmq_cfg_p.json
# Absolute path to RabbitMQ config
RMQ_CFG_PATH=${NEXCORE_DIR}/${RMQ_CFG_FILENAME}

# Connection name for RabbitMq class
RMQ_CONN_NAME=user_default

# =========================================================
# 2. MQTT 連線資訊
# =========================================================
MQTT_HOST=
MQTT_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_CLIENT_ID=abh-gw-s001-d0002
MQTT_SUB_TOPIC=
MQTT_PUB_TOPIC=
MQTT_QOS=1
MQTT_KEEPALIVE=60
MQTT_CLEAN_SESSION=true
MQTT_RECONNECT_DELAY=5

# =========================================================
# 3. Modbus TCP 連線資訊
# =========================================================
MODBUS_CONNECTOR_NAME=user_default
MODBUS_PROTOCOL_TYPE=Modbus TCP

MODBUS_HOST=192.168.2.1
MODBUS_PORT=3000
MODBUS_SLAVE_ID=1
MODBUS_FUNCTION_CODE=3

MODBUS_REGISTERS_MAPPING=[{"index":0,"key":"voltage_V","unit":0.01,"decimals":2},{"index":1,"key":"current_A","unit":0.01,"decimals":2},{"index":2,"key":"power_W_low","unit":0.1,"decimals":1,"ignore":true},{"index":3,"key":"power_W_high","unit":0.1,"decimals":1,"ignore":true},{"index":4,"key":"energy_Wh_low","unit":1.0,"decimals":0,"ignore":true},{"index":5,"key":"energy_Wh_high","unit":1.0,"decimals":0,"ignore":true},{"index":6,"key":"high_voltage_alarm","unit":1.0,"decimals":0},{"index":7,"key":"low_voltage_alarm","unit":1.0,"decimals":0},{"index":2,"key":"power_W","unit":0.1,"decimals":1,"combine":{"high_index":3,"shift":16}},{"index":4,"key":"energy_Wh","unit":1.0,"decimals":0,"combine":{"high_index":5,"shift":16}}]

READ_INTERVAL_SEC=2
MODBUS_TIMEOUT=2

# =========================================================
# 4. Modbus RTU (Serial)
# =========================================================
SERIAL_PORT=/dev/cu.usbserial-0001
RTU_BAUD=9600
RTU_BYTESIZE=8
RTU_PARITY=N
RTU_STOPBITS=1
RTU_TIMEOUT=2
RTU_UNIT=1
RTU_READ_INTERVAL_SEC=2

# =========================================================
# 6. Storage / Mongo
# =========================================================
STO_CFG_FILENAME=storage_cfg.json
STO_CFG_PATH=${MNX_LIB_ROOT}/NexSto/${STO_CFG_FILENAME}
STO_CONN_NAME=user_default

# =========================================================
# 7. 其他共用參數
# =========================================================
WORKER_NAME=s001d0002
WORKER_VERSION=1.0.0
