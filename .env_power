# =========================================================
# 0. 通用設定（每隻 worker 建議都要填）
# =========================================================
SITE_UID=s001               
DEVICE_UID=d0002            
CONN_NAME=user_default    
DRY_RUN=false   # DRY-RUN 模式（未來若需要：true 時只印 log，不送 MQ / 不寫 DB）
# =========================================================
# 1. MNX / RabbitMQ：只走 cfg.json
# =========================================================
# MNXNexlib 專案根目錄
MNX_LIB_ROOT=C:\Users\ericc\iot
# macOS 範例（暫時註解當參考與理解）：
# MNX_LIB_ROOT=/Users/eric/Documents/iot

# 要使用的 RabbitMQ 設定檔檔名
#   溫濕度：rabbitmq_cfg.json
#   power meter：rabbitmq_cfg_p.json
RMQ_CFG_FILENAME=rabbitmq_cfg_p.json

# NexCore/xRabbit 會用到的完整路徑
RMQ_CFG_PATH=${MNX_LIB_ROOT}\NexCore\${RMQ_CFG_FILENAME}
# macOS 範例：
# RMQ_CFG_PATH=${MNX_LIB_ROOT}/NexCore/${RMQ_CFG_FILENAME}

# 給 RabbitMq 類別用的連線名稱（會出現在 log / Mongo.conn_name）
RMQ_CONN_NAME=${CONN_NAME}


# =========================================================
# 2. MQTT 連線資訊（若有 MQTT worker 再填）
# =========================================================
MQTT_HOST=
MQTT_PORT=1883

MQTT_USERNAME=
MQTT_PASSWORD=

# 建議帶上 site_uid / device_uid，方便辨識 client
MQTT_CLIENT_ID=abh-gw-${SITE_UID}-${DEVICE_UID}

# 訂閱 / 發佈主題（依 worker 角色填）
MQTT_SUB_TOPIC=
MQTT_PUB_TOPIC=

MQTT_QOS=1
MQTT_KEEPALIVE=60
MQTT_CLEAN_SESSION=true
MQTT_RECONNECT_DELAY=5       # 斷線重連間隔秒數


# =========================================================
# 3. Modbus TCP 連線資訊（這隻 worker 用 RTU，可先保留空白）
# =========================================================
# --- Connector 層級（對應你表格「設備1 / 設備2 / 設備3」那列） ---
MODBUS_TCP_CONNECTOR_NAME=${CONN_NAME}    # 若未用 Modbus TCP，可忽略
MODBUS_TCP_PROTOCOL_TYPE=Modbus TCP       

MODBUS_TCP_HOST=                          # 若未使用，可留空
MODBUS_TCP_PORT=                          
MODBUS_TCP_SLAVE_ID=1
MODBUS_TCP_FUNCTION_CODE=3
MODBUS_TCP_FIRST_REGISTER=40001

# ► 點位 1（如未使用 Modbus TCP，可留空）
MODBUS_TCP_REGISTER_1=
MODBUS_TCP_DESC_1=
MODBUS_TCP_DEVICE_1=
MODBUS_TCP_FORMAT_1=
MODBUS_TCP_ATTR_1=
MODBUS_TCP_UNIT_1=

# ► 預留 點位 2…n
# MODBUS_TCP_REGISTER_2=
# MODBUS_TCP_DESC_2=
# MODBUS_TCP_DEVICE_2=
# MODBUS_TCP_FORMAT_2=
# MODBUS_TCP_ATTR_2=
# MODBUS_TCP_UNIT_2=

# --- 輪詢與 Timeout（TCP 若未使用，可忽略） ---
READ_INTERVAL_SEC=2          # 這隻 worker 的輪詢頻率（秒）（RTU 也共用）
MODBUS_TIMEOUT=2             # Modbus 通訊 Timeout（秒）


# =========================================================
# 4. Modbus RTU (Serial) 連線資訊（power meter / PZEM 類）
# =========================================================
SERIAL_PORT=COM3             # Windows: 實際看到的 COM port
# macOS 範例：
# SERIAL_PORT=/dev/cu.usbserial-0001

MODBUS_BAUD=9600
MODBUS_BYTESIZE=8
MODBUS_PARITY=N
MODBUS_STOPBITS=2
MODBUS_TIMEOUT=2

MODBUS_RTU_UNIT=1
RTU_READ_INTERVAL_SEC=2      # 若之後想拆開 TCP/RTU 頻率，可另外用這個


# =========================================================
# 5. OPC UA 連線資訊（若有 OPC UA worker 再填）
# =========================================================
OPCUA_ENDPOINT_URL=                 # 必填：Server endpoint
OPCUA_SUBSCRIBE_NODE_IDS=           # 必填：至少一個訂閱 Node，逗號分隔
OPCUA_PUBLISH_INTERVAL_MS=1000      # 必填：訂閱回傳間隔（毫秒）

# 常見必要（依 server 而定）
OPCUA_SECURITY_MODE=None
OPCUA_SECURITY_POLICY=None
OPCUA_USERNAME=
OPCUA_PASSWORD=

# 可選
OPCUA_SESSION_TIMEOUT_MS=60000


# =========================================================
# 6. Storage / Mongo（也只走 cfg.json）
# =========================================================
# Storage 設定檔檔名（放在 NexSto 底下，例如 storage_cfg.json）
STO_CFG_FILENAME=storage_cfg.json

# cfg.json 完整路徑
STO_CFG_PATH=${MNX_LIB_ROOT}\NexSto\${STO_CFG_FILENAME}
# macOS 範例：
# STO_CFG_PATH=${MNX_LIB_ROOT}/NexSto/${STO_CFG_FILENAME}

# 給 xMongo / consumer 用的連線名稱（寫進 log / Mongo.conn_name）
STO_CONN_NAME=${CONN_NAME}


# =========================================================
# 7. 其他共用參數
# =========================================================
#TIMEZONE=Asia/Taipei
#CLOCK_OFFSET_SEC=0           # 若 Gateway 時間有固定誤差，程式可用這個做修正

# Worker 名稱與版本（寫進 envelope）
WORKER_NAME=
APP_VERSION=1.0.0
