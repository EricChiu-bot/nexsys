# =========================================================
# 0. 通用設定（每隻 worker 建議都要填）
# =========================================================
APP_ENV=dev                 # dev / prod / test ...
LOG_LEVEL=INFO              # DEBUG / INFO / WARNING / ERROR
#LOG_LEVEL=ERROR              # DEBUG / INFO / WARNING / ERROR

SITE_UID=s001
DEVICE_UID=d0002

# Connector Name = 你的表格裡的 Connector Name
# 同案場不可相同、注意大小寫
CONN_NAME=user_default

# DRY-RUN 模式（未來若需要：true 時只印 log，不送 MQ / 不寫 DB）
DRY_RUN=false  # DRY-RUN 模式（未來若需要：true 時只印 log，不送 MQ / 不寫 DB）

# =========================================================
# 1. MNX / RabbitMQ：只走 cfg.json
# =========================================================
# MNXNexlib 專案根目錄
MNX_LIB_ROOT=C:\Users\ericc\iot
NEXCORE_DIR=${MNX_LIB_ROOT}\NexCore
# macOS 範例（暫時註解當參考與理解）：
# MNX_LIB_ROOT=/Users/eric/Documents/iot

# 要使用的 RabbitMQ 設定檔檔名
#   例如：rabbitmq_cfg.json（溫濕度）、rabbitmq_cfg_p.json（power meter）
RMQ_CFG_FILENAME=rabbitmq_cfg.json

# NexCore/xRabbit 會用到的完整路徑
# ⚠ dotenv 不會展開 ${}，實際執行需給完整路徑
RMQ_CFG_PATH=C:\Users\ericc\iot\NexCore\rabbitmq_cfg.json
# macOS 範例：
# RMQ_CFG_PATH=/Users/eric/Documents/iot/NexCore/rabbitmq_cfg.json

# 給 RabbitMq 類別用的連線名稱（會出現在 log / Mongo.conn_name）
RMQ_CONN_NAME=user_default


# =========================================================
# 2. MQTT 連線資訊（若有 MQTT worker 再填）
# =========================================================
MQTT_HOST=127.0.0.1
MQTT_PORT=1883

MQTT_USERNAME=
MQTT_PASSWORD=

# 建議帶上 site_uid / device_uid，方便辨識 client
MQTT_CLIENT_ID=abh-gw-s001-d0002

# 訂閱 / 發佈主題（依 worker 角色填）
MQTT_SUB_TOPIC=sensors/s001/d0002
#MQTT_PUB_TOPIC=

MQTT_QOS=1
MQTT_KEEPALIVE=60
MQTT_CLEAN_SESSION=true
MQTT_RECONNECT_DELAY=5       # 斷線重連間隔秒數


# =========================================================
# 3. Modbus TCP 連線資訊（照你表格欄位順序）
# =========================================================
# --- Connector 層級（對應你表格「設備1 / 設備2 / 設備3」那列） ---

#MODBUS_CONNECTOR_NAME=user_default    # 欄位：Connector Name
#MODBUS_PROTOCOL_TYPE=Modbus TCP       # 欄位：Protocol Type（自我紀錄用）

#MODBUS_HOST=192.168.2.1               # 欄位：Host Name
#MODBUS_PORT=3000                      # 欄位：Port
#MODBUS_SLAVE_ID=1                     # 欄位：Slave ID（= Unit ID）
#MODBUS_FUNCTION_CODE=3                # 欄位：Function（功能碼）

# --- 測點定義（Register / Description / Device / Format / Attribute / Unit） ---
#MODBUS_REGISTERS_MAPPING=

# --- 輪詢與 Timeout ---
#READ_INTERVAL_SEC=2
#MODBUS_TIMEOUT=2


# =========================================================
# 4. Modbus RTU (Serial) 連線資訊（例如 PZEM-003/017）
# =========================================================
#SERIAL_PORT=COM3               # Windows: COM3 / COM4...

# macOS 範例：
# SERIAL_PORT=/dev/cu.usbserial-0001
#RTU_BAUD=9600
#RTU_BYTESIZE=8
#RTU_PARITY=N
#RTU_STOPBITS=1
#RTU_TIMEOUT=2

#RTU_UNIT=1
#RTU_READ_INTERVAL_SEC=2


# =========================================================
# 5. OPC UA 連線資訊（若有 OPC UA worker 再填）
# =========================================================
#OPCUA_ENDPOINT_URL=
#OPCUA_SUBSCRIBE_NODE_IDS=
#OPCUA_PUBLISH_INTERVAL_MS=1000

#OPCUA_SECURITY_MODE=None
#OPCUA_SECURITY_POLICY=None
#OPCUA_USERNAME=
#OPCUA_PASSWORD=

#OPCUA_SESSION_TIMEOUT_MS=60000


# =========================================================
# 6. Storage / Mongo（也只走 cfg.json）
# =========================================================
#STO_CFG_FILENAME=storage_cfg.json
#STO_CFG_PATH=
#STO_CONN_NAME=user_default


# =========================================================
# 7. 其他共用參數
# =========================================================
#TIMEZONE=Asia/Taipei
#CLOCK_OFFSET_SEC=0

# Worker 名稱與版本（寫進 envelope）
WORKER_NAME=s001d0002
WORKER_VERSION=1.0.0
